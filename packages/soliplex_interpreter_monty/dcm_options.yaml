# =============================================================================
# DCM Configuration — soliplex_interpreter_monty
# =============================================================================
# Aligned with dart_monty Stage 2 thresholds.
# =============================================================================

dcm:
  metrics:
    cyclomatic-complexity:
      threshold: 10
    lines-of-code:
      threshold: 50
    number-of-parameters:
      threshold: 6
    maximum-nesting-level:
      threshold: 4

  exclude:
    metrics:
      - "**/*.g.dart"
      - "**/*.freezed.dart"
      - "build/**"
      - "test/**"
    rules:
      - "**/*.g.dart"
      - "**/*.freezed.dart"

  rules:
    # --- Common Anti-Patterns ---
    - avoid-unused-parameters
    - avoid-nested-conditional-expressions
    - avoid-missing-enum-constant-in-map
    - avoid-unnecessary-type-assertions
    - avoid-unnecessary-type-casts
    - avoid-unrelated-type-assertions
    - avoid-redundant-async
    - avoid-duplicate-exports
    - avoid-collection-methods-with-unrelated-types
    - avoid-passing-async-when-sync-expected

    # --- Style & Formatting ---
    - prefer-match-file-name:
        exclude:
          - "test/**"
    - prefer-immediate-return
    - prefer-commenting-analyzer-ignores
    - prefer-conditional-expressions
    - prefer-trailing-comma
    - prefer-moving-to-variable:
        exclude:
          - "test/**"
    - newline-before-return
    - no-boolean-literal-compare
    - no-empty-block
    - no-equal-then-else
    - prefer-first
    - prefer-last
    - binary-expression-operand-order
    - double-literal-format

    # --- Null Safety & Types ---
    - avoid-late-keyword:
        exclude:
          - "test/**"
    - avoid-dynamic:
        exclude:
          - "test/**"
    - avoid-non-null-assertion:
        exclude:
          - "test/**"

    # --- Member Ordering ---
    # Excluding widgets — Flutter State lifecycle (initState, didUpdateWidget,
    # dispose, build) conflicts with strict ordering of overridden vs private.
    - member-ordering:
        exclude:
          - "lib/src/widgets/**"
        order:
          - constructors
          - public-fields
          - private-fields
          - get-setters
          - public-methods
          - private-methods
          - overridden-methods

    # --- Testing ---
    - prefer-test-matcher
    - prefer-correct-test-file-name
